{% extends "events/event_base.html" %}
{% load url from future %}
{% block head_title %}
Programme
{% endblock %}

{% block tab %}
	<ul class="nav nav-tabs">
	  <li><a href="{% url 'events-list' %}">List</a></li>
	  <li class="active"><a href="{% url 'events-map' %}">Map</a></li>
	</ul>
	<div class="row">
			<div class="span6">
	    	{% include "maps/_map.html" %}
	        <style type="text/css">
	            #map_canvas{
	                height: 400px;
	            }
	        </style>
	        {% if map_bounds %}
				<script type="text/javascript">
					$(window).ready(function(){ 
	                	SSOUK.map_handler.map.fitBounds({{map_bounds}});
	             	});
	            </script>
	        {% endif %}
		</div>	
		  <div class="span6">
		  	
		  	
		  	{% for event in object_list %}
		    
			{% include "events/_event_snippet.html" %}
	      	<script type="text/javascript">
               $(document).ready(function(){
                       
                       var info_text = "<a href=\"{% url 'event-detail' event.id %}\">{{ event.name }}</a>";
                       console.log(info_text);
                   SSOUK.map_handler.updateMarker({{ event.location.marker.y }}, 
                                                  {{ event.location.marker.x }},
                                                  info_text,
                                                  {{ event.location.id }}
                                                  );
               }); 
			</script>
		    
		    {% endfor %}
		</div>
	</div>
{% endblock%}
